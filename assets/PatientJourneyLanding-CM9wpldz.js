import{p as P,e as p,g as S,r,C as x,u as Y,j as e,F as k,a as $,b as M,c as z,R as _,d as H,f as K,L as V}from"./index-C05I8geP.js";const W=async s=>{s(!0);try{return(await S(p.ASK_IBU_QUESTIONS))?.data?.data}catch(t){console.error("Error fetching Ask IBU questions:",t)}finally{s(!1)}},X=async s=>{s(!0);try{return(await S(p.YOUR_QUESTION))?.data?.data}catch(t){console.error("Error fetching Ask IBU questions:",t)}finally{s(!1)}},Z=async(s,t,n,i,c,o)=>{if(s.preventDefault(),!n.trim()){t("Please enter a question");return}t(""),c(!0);try{const d=await P(p.ADD_QUESTIONS,{question:n});o({type:"success",title:"Success",message:"Quesion submitted successfully",show:!0}),i("")}catch(d){console.error("Error submitting question:",d),o({type:"danger",title:"Error",message:"Oops! Failed to submit the question.",show:!0})}finally{c(!1)}},ee=async s=>{s(!0);try{return(await S(p.GET_AGE_GROUP_CATEGORIES))?.data?.data?.tags||[]}catch(t){return console.error("Error fetching tags:",t),[]}},E=(s,t)=>!t||t.length===0?s:s.filter(n=>t.every(i=>n.topics?.includes(i))),se=()=>{const s="/assets/images/",{setToast:t}=r.useContext(x),[n,i]=r.useState([]),[c,o]=r.useState([]),{setIsLoading:d}=r.useContext(x),[g,w]=r.useState(""),[C,T]=r.useState(""),[D,L]=r.useState([]),[u,m]=r.useState([]),[f,j]=r.useState([]),[b,v]=r.useState(!1),[N,I]=r.useState(!1),[Q,O]=r.useState([]),h=Y();r.useEffect(()=>{if(h.pathname==="/account")return;(async()=>{const l=await W(d);l&&(i(l),o(l)),d(!1)})()},[]),r.useEffect(()=>{if(h.pathname==="/home")return;(async()=>{const l=await X(d);l&&O(l),d(!1)})()},[]),r.useEffect(()=>{if(h.pathname==="/account")return;(async()=>{const l=await ee(d);l&&L(l),d(!1)})()},[]);const B=a=>{u.includes(a)?m(u.filter(l=>l!==a)):m([...u,a])},U=()=>{u.length>0?(j(u),o(E(n,u))):(j([]),o(n)),v(!1)},R=()=>{m([]),v(!1)},G=a=>{const l=f.filter(F=>F!==a);j(l),o(E(n,l)),m(l)},J=()=>{j([]),m([]),o(n)},y=h.pathname==="/account"?Q:c;return e.jsxs(e.Fragment,{children:[h.pathname!=="/account"&&e.jsxs("div",{className:"filter-section",children:[y.length>0||f.length>0?e.jsx("div",{className:"filter-container",children:e.jsx("button",{className:"btn btn-link filter-btn",onClick:()=>v(!b),children:b?e.jsx("img",{src:s+"close-arrow.svg",alt:"Filter Icon"}):e.jsx("img",{src:s+"filter-icon.svg",alt:"Filter Icon"})})}):null,b&&e.jsxs("div",{className:"filter-box",style:{zIndex:1e3},children:[e.jsx("h6",{children:"Filter:"}),e.jsxs("button",{className:"btn btn-light w-100 text-start",onClick:()=>I(!N),children:["Tags",e.jsx("span",{className:"float-end",children:N?"▲":"▼"})]}),N&&e.jsx("div",{className:"tags-options",children:e.jsx("div",{className:"tags-list",children:D.map((a,l)=>e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:`tag-${l}`,checked:u.includes(a),onChange:()=>B(a)}),e.jsx("label",{className:"form-check-label",htmlFor:`tag-${l}`,children:a})]},l))})}),e.jsxs("div",{className:"mt-2 d-flex justify-content-between",children:[e.jsx("button",{className:"btn btn-primary",onClick:U,children:"Apply"}),e.jsx("button",{className:"btn btn-primary btn-bordered",onClick:R,children:"Cancel"})]})]}),f.length>0&&e.jsxs("div",{className:"applied-filters mb-3",children:[f.map((a,l)=>e.jsxs("span",{className:"badge bg-info me-2",children:[a," ",e.jsx("button",{className:"btn btn-sm btn-light ms-1",onClick:()=>G(a),children:"✖"})]},l)),e.jsx("button",{className:"btn btn-link text-danger ms-2",onClick:J,children:"Remove All"})]})]}),e.jsx("div",{className:"scroll-list",children:y.length>0?y.map(a=>e.jsx("div",{className:"detail-data-box",children:e.jsxs("div",{className:"content-box",children:[e.jsx("div",{className:"heading",children:a.question}),e.jsx("div",{className:"region",children:a.country}),e.jsx("div",{className:"tags",children:a.topics.map((l,F)=>e.jsx("div",{children:l},F))}),e.jsxs("div",{className:"answer",children:[e.jsx("span",{children:"Answer:"}),a.answer]}),e.jsx("div",{className:"date",children:a.created})]})},a.id)):e.jsx("div",{className:"no_data_found",children:"No data Found"})}),h.pathname!=="/account"&&e.jsxs(k,{className:"ask-ibu-form",onSubmit:a=>Z(a,T,g,w,d,t),children:[e.jsxs($,{className:"form-group",children:[e.jsx(k.Control,{id:"question",as:"textarea",rows:4,value:g,onChange:a=>w(a.target.value),placeholder:"Ask your question..."}),C&&e.jsx("div",{className:"validation text-danger",children:C})]}),e.jsx("button",{type:"submit",className:"btn btn-primary mt-2",style:{placeContent:"center"},children:"Send"})]})]})};function A({onSectionClick:s,section:t}){const n=M();return[{class:"explore",title:"Explore your patient's Journey"},{class:"faq",title:"FAQ",subtitle:"Lorem ipsum dolor sit amet consectetur. Odio erat sed vitae pulvinar fcilisis rhoncus vel morbi ullamcorper."},{class:"latest-content",title:"Latest content",subtitle:"Lorem ipsum dolor sit amet consectetur. Odio erat sed vitae pulvinar fcilisis rhoncus vel morbi ullamcorper."},{class:"ask-ibu",title:"Ask IBU",subtitle:"Lorem ipsum dolor sit amet consectetur. Odio erat sed vitae pulvinar fcilisis rhoncus vel morbi ullamcorper."}].map((c,o)=>c.class=="explore"&&!t||c.class==t?.class?null:e.jsx(z,{className:c.class,children:e.jsxs("div",{className:"explore-box",onClick:s?()=>{c.class==="explore"&&n("/touchpoints"),s(c)}:null,children:[e.jsx("h6",{children:c.title}),e.jsx("p",{children:c.subtitle})]})},o))}const q=({content:s,isFaq:t})=>e.jsx("div",{className:"touchpoint-data-boxes",children:s?s&&s.map((n,i)=>e.jsx(_.Fragment,{children:e.jsx(H,{section:n,idx:n.id,favTab:!1},i)},n.id)):e.jsx("div",{className:"no_data_found",children:"No data Found"})}),te=()=>{const{content:s}=r.useContext(x),[t,n]=r.useState([]);return r.useEffect(()=>{if(s.loading||s.error)return;const i=s.data.filter(c=>c.category.toLowerCase()==="faq");n(i)},[s]),e.jsx(e.Fragment,{children:t.length>0?e.jsx(q,{content:t,isFaq:!0}):e.jsx("div",{className:"no_data_found",children:"No data Found"})})},ae=()=>{const{content:s}=r.useContext(x),[t,n]=r.useState([]);return r.useEffect(()=>{if(s.loading||s.error)return;const i=s.data.sort((c,o)=>{const d=new Date(c.creation_date.split(".").reverse().join("-"));return new Date(o.creation_date.split(".").reverse().join("-"))-d});n(i)},[]),e.jsx(e.Fragment,{children:t.length>0?e.jsx(q,{content:t,isFaq:!1}):e.jsx("div",{className:"no_data_found",children:"No data Found"})})};function ne({onSectionClick:s,section:t}){return e.jsxs("div",{className:`journey-boxes d-flex ${t.class!="ask-ibu"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:"left-side",children:e.jsx(A,{onSectionClick:s,section:t})}),e.jsxs("div",{className:"right-side",children:[e.jsxs("div",{className:"box-top d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h6",{children:t.title}),e.jsxs("p",{children:["Lorem ipsum dolor sit amet consectetur. Odio erat sed vitae pulvinar fcilisis rhoncus vel morbi ullamcorper."," "]})]}),e.jsx("span",{onClick:()=>{s(null)},children:e.jsx("img",{src:"/assets/images/"+"close-arrow.svg",alt:""})})]}),e.jsx("div",{className:"data-box",children:t.class==="ask-ibu"?e.jsx(se,{}):t.class==="faq"?e.jsx(te,{}):t.class==="latest-content"?e.jsx(ae,{}):null})]})]})}const le=()=>{const{filterAges:s,fetchAgeGroups:t}=r.useContext(x),[n,i]=r.useState(null);r.useEffect(()=>{(async()=>await t())()},[]);const c=o=>i(o);return e.jsx("div",{className:"main-page",children:e.jsx("div",{className:"custom-container",children:e.jsx(K,{children:e.jsx("section",{className:"journey-box",children:n?e.jsx(ne,{onSectionClick:c,section:n}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"explore-journey",children:[e.jsx("h5",{children:"Explore your patient's Journey"}),e.jsx("div",{className:"patient-journey d-flex align-items-center justify-content-between",children:s.loading?e.jsx(e.Fragment,{}):s.error?e.jsx(e.Fragment,{}):s.data&&s.data.length>0&&s.data.map((o,d)=>e.jsxs(_.Fragment,{children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:o.label},className:"journey-link"}),d!==s.data.length-1&&e.jsx("div",{className:"line"})]},o.id))}),e.jsx(V,{to:"/touchpoints",className:"start-btn",children:"Start"})]}),e.jsx(A,{onSectionClick:c,section:n})]})})})})})};export{le as default};
