import{p as J,e as p,g as S,r as n,C as x,u as P,j as e,F as k,a as Y,b as $,c as z,d as M,R as H,f as K,L as V}from"./index-BdfIE0m-.js";const W=async s=>{s(!0);try{return(await S(p.ASK_IBU_QUESTIONS))?.data?.data}catch(t){console.error("Error fetching Ask IBU questions:",t)}finally{s(!1)}},X=async s=>{s(!0);try{return(await S(p.YOUR_QUESTION))?.data?.data}catch(t){console.error("Error fetching Ask IBU questions:",t)}finally{s(!1)}},Z=async(s,t,c,d,l,o)=>{if(s.preventDefault(),!c.trim()){t("Please enter a question");return}t(""),l(!0);try{const i=await J(p.ADD_QUESTIONS,{question:c});o({type:"success",title:"Success",message:"Quesion submitted successfully",show:!0}),d("")}catch(i){console.error("Error submitting question:",i),o({type:"danger",title:"Error",message:"Oops! Failed to submit the question.",show:!0})}finally{l(!1)}},ee=async s=>{s(!0);try{return(await S(p.GET_AGE_GROUP_CATEGORIES))?.data?.data?.tags||[]}catch(t){return console.error("Error fetching tags:",t),[]}},E=(s,t)=>!t||t.length===0?s:s.filter(c=>t.every(d=>c.topics?.includes(d))),se=()=>{const s="/assets/images/",{setToast:t}=n.useContext(x),[c,d]=n.useState([]),[l,o]=n.useState([]),{setIsLoading:i}=n.useContext(x),[g,w]=n.useState(""),[C,q]=n.useState(""),[T,D]=n.useState([]),[u,m]=n.useState([]),[f,j]=n.useState([]),[b,v]=n.useState(!1),[N,L]=n.useState(!1),[I,Q]=n.useState([]),h=P();n.useEffect(()=>{if(h.pathname==="/account")return;(async()=>{const r=await W(i);r&&(d(r),o(r)),i(!1)})()},[]),n.useEffect(()=>{if(h.pathname==="/home")return;(async()=>{const r=await X(i);r&&Q(r),i(!1)})()},[]),n.useEffect(()=>{if(h.pathname==="/account")return;(async()=>{const r=await ee(i);r&&D(r),i(!1)})()},[]);const O=a=>{u.includes(a)?m(u.filter(r=>r!==a)):m([...u,a])},B=()=>{u.length>0?(j(u),o(E(c,u))):(j([]),o(c)),v(!1)},U=()=>{m([]),v(!1)},R=a=>{const r=f.filter(F=>F!==a);j(r),o(E(c,r)),m(r)},G=()=>{j([]),m([]),o(c)},y=h.pathname==="/account"?I:l;return e.jsxs(e.Fragment,{children:[h.pathname!=="/account"&&e.jsxs("div",{className:"filter-section",children:[y.length>0||f.length>0?e.jsx("div",{className:"filter-container",children:e.jsx("button",{className:"btn btn-link filter-btn",onClick:()=>v(!b),children:b?e.jsx("img",{src:s+"close-arrow.svg",alt:"Filter Icon"}):e.jsx("img",{src:s+"filter-icon.svg",alt:"Filter Icon"})})}):null,b&&e.jsxs("div",{className:"filter-box",style:{zIndex:1e3},children:[e.jsx("h6",{children:"Filter:"}),e.jsxs("button",{className:"btn btn-light w-100 text-start",onClick:()=>L(!N),children:["Tags",e.jsx("span",{className:"float-end",children:N?"▲":"▼"})]}),N&&e.jsx("div",{className:"tags-options",children:e.jsx("div",{className:"tags-list",children:T.map((a,r)=>e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:`tag-${r}`,checked:u.includes(a),onChange:()=>O(a)}),e.jsx("label",{className:"form-check-label",htmlFor:`tag-${r}`,children:a})]},r))})}),e.jsxs("div",{className:"mt-2 d-flex justify-content-between",children:[e.jsx("button",{className:"btn btn-primary",onClick:B,children:"Apply"}),e.jsx("button",{className:"btn btn-primary btn-bordered",onClick:U,children:"Cancel"})]})]}),f.length>0&&e.jsxs("div",{className:"applied-filters mb-3",children:[f.map((a,r)=>e.jsxs("span",{className:"badge bg-info me-2",children:[a," ",e.jsx("button",{className:"btn btn-sm btn-light ms-1",onClick:()=>R(a),children:"✖"})]},r)),e.jsx("button",{className:"btn btn-link text-danger ms-2",onClick:G,children:"Remove All"})]})]}),e.jsx("div",{className:"scroll-list",children:y.length>0?y.map(a=>e.jsx("div",{className:"detail-data-box",children:e.jsxs("div",{className:"content-box",children:[e.jsx("div",{className:"heading",children:a.question}),e.jsx("div",{className:"region",children:a.country}),e.jsx("div",{className:"tags",children:a.topics.map((r,F)=>e.jsx("div",{children:r},F))}),e.jsxs("div",{className:"answer",children:[e.jsx("span",{children:"Answer:"}),a.answer]}),e.jsx("div",{className:"date",children:a.created})]})},a.id)):e.jsx("div",{className:"no_data_found",children:"No data Found"})}),h.pathname!=="/account"&&e.jsxs(k,{className:"ask-ibu-form",onSubmit:a=>Z(a,q,g,w,i,t),children:[e.jsxs(Y,{className:"form-group",children:[e.jsx(k.Control,{id:"question",as:"textarea",rows:4,value:g,onChange:a=>w(a.target.value),placeholder:"Ask your question..."}),C&&e.jsx("div",{className:"validation text-danger",children:C})]}),e.jsx("button",{type:"submit",className:"btn btn-primary mt-2",style:{placeContent:"center"},children:"Send"})]})]})};function _({onSectionClick:s,section:t}){const c=$();return[{class:"explore",title:"Explore your patient's Journey"},{class:"faq",title:"FAQ",subtitle:"Lorem ipsum dolor sit amet consectetur. Odio erat sed vitae pulvinar fcilisis rhoncus vel morbi ullamcorper."},{class:"latest-content",title:"Latest content",subtitle:"Lorem ipsum dolor sit amet consectetur. Odio erat sed vitae pulvinar fcilisis rhoncus vel morbi ullamcorper."},{class:"ask-ibu",title:"Ask IBU",subtitle:"Lorem ipsum dolor sit amet consectetur. Odio erat sed vitae pulvinar fcilisis rhoncus vel morbi ullamcorper."}].map((l,o)=>l.class=="explore"&&!t||l.class==t?.class?null:e.jsx(z,{className:l.class,children:e.jsxs("div",{className:"explore-box",onClick:s?()=>{l.class==="explore"&&c("/touchpoints"),s(l)}:null,children:[e.jsx("h6",{children:l.title}),e.jsx("p",{children:l.subtitle})]})},o))}const A=({content:s,isFaq:t})=>e.jsx("div",{className:"touchpoint-data-boxes",children:s?s&&e.jsx(M,{items:s,itemCount:9,favTab:!1}):e.jsx("div",{className:"no_data_found",children:"No data Found"})}),te=()=>{const{content:s}=n.useContext(x),[t,c]=n.useState([]);return n.useEffect(()=>{if(s.loading||s.error)return;const d=s.data.filter(l=>l.category.toLowerCase()==="faq");c(d)},[s]),e.jsx(e.Fragment,{children:t.length>0?e.jsx(A,{content:t,isFaq:!0}):e.jsx("div",{className:"no_data_found",children:"No data Found"})})},ae=()=>{const{content:s}=n.useContext(x),[t,c]=n.useState([]);return n.useEffect(()=>{if(s.loading||s.error)return;const d=s.data.sort((l,o)=>{const i=new Date(l.creation_date.split(".").reverse().join("-"));return new Date(o.creation_date.split(".").reverse().join("-"))-i});c(d)},[]),e.jsx(e.Fragment,{children:t.length>0?e.jsx(A,{content:t,isFaq:!1}):e.jsx("div",{className:"no_data_found",children:"No data Found"})})};function ne({onSectionClick:s,section:t}){return e.jsxs("div",{className:`journey-boxes d-flex ${t.class!="ask-ibu"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:"left-side",children:e.jsx(_,{onSectionClick:s,section:t})}),e.jsxs("div",{className:"right-side",children:[e.jsxs("div",{className:"box-top d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h6",{children:t.title}),e.jsxs("p",{children:["Lorem ipsum dolor sit amet consectetur. Odio erat sed vitae pulvinar fcilisis rhoncus vel morbi ullamcorper."," "]})]}),e.jsx("span",{onClick:()=>{s(null)},children:e.jsx("img",{src:"/assets/images/"+"close-arrow.svg",alt:""})})]}),e.jsx("div",{className:"data-box",children:t.class==="ask-ibu"?e.jsx(se,{}):t.class==="faq"?e.jsx(te,{}):t.class==="latest-content"?e.jsx(ae,{}):null})]})]})}const ce=()=>{const{filterAges:s,fetchAgeGroups:t}=n.useContext(x),[c,d]=n.useState(null);n.useEffect(()=>{(async()=>await t())()},[]);const l=o=>d(o);return e.jsx("div",{className:"main-page",children:e.jsx("div",{className:"custom-container",children:e.jsx(H,{children:e.jsx("section",{className:"journey-box",children:c?e.jsx(ne,{onSectionClick:l,section:c}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"explore-journey",children:[e.jsx("h5",{children:"Explore your patient's Journey"}),e.jsx("div",{className:"patient-journey d-flex align-items-center justify-content-between",children:s.loading?e.jsx(e.Fragment,{}):s.error?e.jsx(e.Fragment,{}):s.data&&s.data.length>0&&s.data.map((o,i)=>e.jsxs(K.Fragment,{children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:o.label},className:"journey-link"}),i!==s.data.length-1&&e.jsx("div",{className:"line"})]},o.id))}),e.jsx(V,{to:"/touchpoints",className:"start-btn",children:"Start"})]}),e.jsx(_,{onSectionClick:l,section:c})]})})})})})};export{ce as default};
